<!DOCTYPE html>
<html>
  <head>
    <title>Not the Library Cafe</title>
    <!--link rel="stylesheet" type="text/css" href="INSERTSTYLESHEETLINK"-->

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />
    <!--Custom Stylesheet (ours)-->
    <link rel='stylesheet' type='text/css' href='./Stylesheets/style.css'>
    <!--Bootstrap CSS-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <!--JQuery JS for Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

  </head>

  <body>

    <div class="container-fluid bg-1 text-center">
        <h1>Not the Library Cafe &#128548;&#127959; &#127981; &#127970; &#127970; </h1>
    </div>

  <div class="row">
  <div class="col-sm-9" id = "map"></div>
  <div class="col-sm-3 text-center">
      <div class="btn-group-vertical">
      <button type="button" id = "all" class="btn btn-primary" onclick="FireButton">Show all</button>
      <button type="button" id = "discounts" class="btn btn-primary" onclick="FireButton">Imperial Discounts</button>
      <button type="button" id = "snacks" class="btn btn-primary" onclick="FireButton">Snacks</button>
      <p>Currently showing </p><p id="demo">everything</p>
      </div>
  </div>
  </div>

    <script>

      var arrays = {};
      var selectedElement = "All"
      var markers = [];

      arrays.discounts  = [[" ", 51.800052, -0.077467, 4.2],
                [" ", 51.480226, 0.069589, 0],
                [" ", 51.48808, -0.40301, 4.5],
                [" ", 51.341246, -0.061708, 9.5],
                [" ", 51.548934, -0.375026, 3.9],
                [" ", 51.602689, 0.228719, 3.8],
                [" ", 51.480955, -0.365949, 4.3],
                [" ", 51.750365, -0.34032, 12.1],
                [" ", 51.563842, 0.207556, 3.8],
                [" ", 51.69484, -0.386208, 4.1]]

      arrays.snacks  = [[" ", 51.800052, -0.077467, 4.2]]

      arrays.all  = [[" ", 51.800052, -0.077467, 4.2]]

      function initMap() {
        var styledMapType = new google.maps.StyledMapType(
          [
      {
        "elementType": "labels.text.fill",
        "stylers": [
          {
            "color": "#8a898b"
          }
        ]
      },
      {
        "featureType": "poi",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#cccbcd"
          }
        ]
      },
      {
        "featureType": "poi.attraction",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#cccbcd"
          }
        ]
      },
      {
        "featureType": "poi.business",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#cccbcd"
          }
        ]
      },
      {
        "featureType": "poi.government",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#cccbcd"
          }
        ]
      },
      {
        "featureType": "poi.medical",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#cccbcd"
          }
        ]
      },
      {
        "featureType": "poi.park",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#abd9c0"
          }
        ]
      },
      {
        "featureType": "poi.place_of_worship",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#cccbcd"
          }
        ]
      },
      {
        "featureType": "poi.school",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#d1d0d2"
          }
        ]
      },
      {
        "featureType": "poi.sports_complex",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#cccbcd"
          }
        ]
      },
      {
        "featureType": "road.highway",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#fbfcff"
          }
        ]
      },
      {
        "featureType": "water",
        "elementType": "geometry",
        "stylers": [
          {
            "color": "#bde1f6"
          }
        ]
      }
    ],
      {name: 'Styled Map'});

        var myLatLng = {lat: 51.498732, lng: -0.176935};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 16,
          center: myLatLng
        });

        var contentString = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">Library Cafe</h1>'+
            '<div id="bodyContent">'+
            '<p>We have to do better &#128548 </p>'+
            '</div>'+
            '</div>';

        var infowindow = new google.maps.InfoWindow({
          content: contentString
        });

        var markerIcon = {
          url: './images/marker-flag.png',
          scaledSize: new google.maps.Size(40, 40),
          origin: new google.maps.Point(0, 0),
          anchor: new google.maps.Point(40,40),
          labelOrigin: new google.maps.Point(0,0)
        };

        var marker = new google.maps.Marker({
          position: myLatLng,
          map: map,
          icon: markerIcon,
           label: {
             text: " ",
             fontSize: "16px",
           }
        });

        marker.addListener('click', function() {
        infowindow.open(map, marker);
        });

        //Associate the styled map with the MapTypeId and set it to display.
        map.mapTypes.set('styled_map', styledMapType);
        map.setMapTypeId('styled_map');

      }

        document.getElementById("all").addEventListener("click", function(){
            document.getElementById("demo").innerHTML = "everything";
            testFunction(arrays.all)
        });

      document.getElementById("discounts").addEventListener("click", function(){
            document.getElementById("demo").innerHTML = "discounts";
            testFunction(arrays.discounts)
        });

        document.getElementById("snacks").addEventListener("click", function(){
            document.getElementById("demo").innerHTML = "snacks";
            testFunction(arrays.snacks)
        });

      function testFunction(an_array) {
        setAllMap(null);
        document.getElementById("demo").innerHTML = an_array;

        for (i = 0; i < an_array.length; i++) {
        var new_lat = an_array[i][2];
        var new_lang= an_array[i][3];

        marker = new google.maps.Marker({
        position: new google.maps.LatLng(an_array[i][1], an_array[i][2]),
        map: map
        });
        markers.push(marker)
      }
      }

      function setAllMap(val) {
          for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(val);
          }
      }

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBL8uZACjkHMb32pPJbdmprNKSWVa02EQo&callback=initMap">
    </script>

  </body>


</html>
